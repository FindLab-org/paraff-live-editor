const a=e=>new Proxy({},{get:(t,r)=>(...s)=>p(e,r)(...s)});function p(e,t){const r={};return r.constructor=e.cwrap("vrvToolkit_constructor","number",[]),r.destructor=e.cwrap("vrvToolkit_destructor",null,["number"]),r.edit=e.cwrap("vrvToolkit_edit","number",["number","string"]),r.editInfo=e.cwrap("vrvToolkit_editInfo","string",["number"]),r.getAvailableOptions=e.cwrap("vrvToolkit_getAvailableOptions","string",["number"]),r.getDefaultOptions=e.cwrap("vrvToolkit_getDefaultOptions","string",["number"]),r.getDescriptiveFeatures=e.cwrap("vrvToolkit_getDescriptiveFeatures","string",["number","string"]),r.getElementAttr=e.cwrap("vrvToolkit_getElementAttr","string",["number","string"]),r.getElementsAtTime=e.cwrap("vrvToolkit_getElementsAtTime","string",["number","number"]),r.getExpansionIdsForElement=e.cwrap("vrvToolkit_getExpansionIdsForElement","string",["number","string"]),r.getHumdrum=e.cwrap("vrvToolkit_getHumdrum","string",["number"]),r.convertMEIToHumdrum=e.cwrap("vrvToolkit_convertMEIToHumdrum","string",["number","string"]),r.convertHumdrumToHumdrum=e.cwrap("vrvToolkit_convertHumdrumToHumdrum","string",["number","string"]),r.convertHumdrumToMIDI=e.cwrap("vrvToolkit_convertHumdrumToMIDI","string",["number","string"]),r.getLog=e.cwrap("vrvToolkit_getLog","string",["number"]),r.getMEI=e.cwrap("vrvToolkit_getMEI","string",["number","string"]),r.getNotatedIdForElement=e.cwrap("vrvToolkit_getNotatedIdForElement","string",["number","string"]),r.getOptions=e.cwrap("vrvToolkit_getOptions","string",["number"]),r.getPageCount=e.cwrap("vrvToolkit_getPageCount","number",["number"]),r.getPageWithElement=e.cwrap("vrvToolkit_getPageWithElement","number",["number","string"]),r.getTimeForElement=e.cwrap("vrvToolkit_getTimeForElement","number",["number","string"]),r.getTimesForElement=e.cwrap("vrvToolkit_getTimesForElement","string",["number","string"]),r.getMIDIValuesForElement=e.cwrap("vrvToolkit_getMIDIValuesForElement","string",["number","string"]),r.getVersion=e.cwrap("vrvToolkit_getVersion","string",["number"]),r.loadData=e.cwrap("vrvToolkit_loadData","number",["number","string"]),r.loadZipDataBase64=e.cwrap("vrvToolkit_loadZipDataBase64","number",["number","string"]),r.loadZipDataBuffer=e.cwrap("vrvToolkit_loadZipDataBuffer","number",["number","number","number"]),r.redoLayout=e.cwrap("vrvToolkit_redoLayout",null,["number","string"]),r.redoPagePitchPosLayout=e.cwrap("vrvToolkit_redoPagePitchPosLayout",null,["number"]),r.renderData=e.cwrap("vrvToolkit_renderData","string",["number","string","string"]),r.renderToExpansionMap=e.cwrap("vrvToolkit_renderToExpansionMap","string",["number"]),r.renderToMIDI=e.cwrap("vrvToolkit_renderToMIDI","string",["number"]),r.renderToPAE=e.cwrap("vrvToolkit_renderToPAE","string",["number"]),r.renderToSVG=e.cwrap("vrvToolkit_renderToSVG","string",["number","number","number"]),r.renderToTimemap=e.cwrap("vrvToolkit_renderToTimemap","string",["number","string"]),r.resetOptions=e.cwrap("vrvToolkit_resetOptions",null,["number"]),r.resetXmlIdSeed=e.cwrap("vrvToolkit_resetXmlIdSeed",null,["number","number"]),r.select=e.cwrap("vrvToolkit_select","number",["number","string"]),r.setOptions=e.cwrap("vrvToolkit_setOptions",null,["number","string"]),r.validatePAE=e.cwrap("vrvToolkit_validatePAE","string",["number","string"]),r[t]}class o{constructor(t){if(this.VerovioModule=t,!this.VerovioModule)throw new Error("VerovioToolkit needs VerovioModule passed as argument to the constructor.");this.proxy=a(this.VerovioModule),this.ptr=this.proxy.constructor(),o.instances.push(this)}destroy(){o.instances.splice(o.instances.findIndex(t=>t.ptr===this.ptr),1),this.proxy.destructor(this.ptr)}edit(t){return this.proxy.edit(this.ptr,JSON.stringify(t))}editInfo(){return JSON.parse(this.proxy.editInfo(this.ptr))}getAvailableOptions(){return JSON.parse(this.proxy.getAvailableOptions(this.ptr))}getDefaultOptions(){return JSON.parse(this.proxy.getDefaultOptions(this.ptr))}getDescriptiveFeatures(t){return JSON.parse(this.proxy.getDescriptiveFeatures(this.ptr,JSON.stringify(t)))}getElementAttr(t){return JSON.parse(this.proxy.getElementAttr(this.ptr,t))}getElementsAtTime(t){return JSON.parse(this.proxy.getElementsAtTime(this.ptr,t))}getExpansionIdsForElement(t){return JSON.parse(this.proxy.getExpansionIdsForElement(this.ptr,t))}getHumdrum(){return this.proxy.getHumdrum(this.ptr)}convertHumdrumToHumdrum(t){return this.proxy.convertHumdrumToHumdrum(this.ptr,t)}convertHumdrumToMIDI(t){return this.proxy.convertHumdrumToMIDI(this.ptr,t)}convertMEIToHumdrum(t){return this.proxy.convertMEIToHumdrum(this.ptr,t)}getLog(){return this.proxy.getLog(this.ptr)}getMEI(t={}){return this.proxy.getMEI(this.ptr,JSON.stringify(t))}getMIDIValuesForElement(t){return JSON.parse(this.proxy.getMIDIValuesForElement(this.ptr,t))}getNotatedIdForElement(t){return this.proxy.getNotatedIdForElement(this.ptr,t)}getOptions(t){return t===!0?(console.warn("This function (with 'true' parameter) is deprecated. Use getDefaultOptions() instead."),JSON.parse(this.proxy.getDefaultOptions(this.ptr))):t===!1?(console.warn("This function (with 'false' parameter) is deprecated. Use getOptions() instead."),JSON.parse(this.proxy.getOptions(this.ptr))):JSON.parse(this.proxy.getOptions(this.ptr))}getPageCount(){return this.proxy.getPageCount(this.ptr)}getPageWithElement(t){return this.proxy.getPageWithElement(this.ptr,t)}getTimeForElement(t){return this.proxy.getTimeForElement(this.ptr,t)}getTimesForElement(t){return JSON.parse(this.proxy.getTimesForElement(this.ptr,t))}getVersion(){return this.proxy.getVersion(this.ptr)}loadData(t){return this.proxy.loadData(this.ptr,t)}loadZipDataBase64(t){return this.proxy.loadZipDataBase64(this.ptr,t)}loadZipDataBuffer(t){if(!(t instanceof ArrayBuffer))return console.error("Parameter for loadZipDataBuffer has to be of type ArrayBuffer"),!1;var r=new Uint8Array(t),s=r.length*r.BYTES_PER_ELEMENT,n=this.VerovioModule._malloc(s);this.VerovioModule.HEAPU8.set(r,n);var i=this.proxy.loadZipDataBuffer(this.ptr,n,s);return this.VerovioModule._free(n),i}redoLayout(t={}){this.proxy.redoLayout(this.ptr,JSON.stringify(t))}redoPagePitchPosLayout(){this.proxy.redoPagePitchPosLayout(this.ptr)}renderData(t,r){return this.proxy.renderData(this.ptr,t,JSON.stringify(r))}renderToExpansionMap(){return JSON.parse(this.proxy.renderToExpansionMap(this.ptr))}renderToMIDI(){return this.proxy.renderToMIDI(this.ptr)}renderToPAE(){return this.proxy.renderToPAE(this.ptr)}renderToSVG(t=1,r=!1){return this.proxy.renderToSVG(this.ptr,t,r)}renderToTimemap(t={}){return JSON.parse(this.proxy.renderToTimemap(this.ptr,JSON.stringify(t)))}resetOptions(){this.proxy.resetOptions(this.ptr)}resetXmlIdSeed(t){return this.proxy.resetXmlIdSeed(this.ptr,t)}select(t){return this.proxy.select(this.ptr,JSON.stringify(t))}setOptions(t){return t=this.preprocessOptions(t),this.proxy.setOptions(this.ptr,JSON.stringify(t))}validatePAE(t){return t instanceof Object&&(t=JSON.stringify(t)),JSON.parse(this.proxy.validatePAE(this.ptr,t))}preprocessOptions(t){if(!t.hasOwnProperty("fontAddCustom"))return t;const r=t.fontAddCustom;let s=[];for(let n=0;n<r.length;n++){const i=new XMLHttpRequest;i.open("GET",r[n],!1),i.send(null),i.status===200?s.push(i.responseText):console.error(`${r[n]} could not be retrieved`)}return t.fontAddCustom=s,t}}o.instances=[];typeof window<"u"&&window.addEventListener&&window.addEventListener("unload",()=>{o.instances.forEach(e=>{e.destroy()})});export{o as VerovioToolkit};
